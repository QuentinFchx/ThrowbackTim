{"version":3,"file":"app.js","sources":["../src/Level.ts","../src/Item.ts","../src/items/balls.ts","../src/items/bouncers.ts","../src/items/pipes.ts","../src/items/ramps.ts","../src/levels/level1.ts","../src/app.ts"],"sourcesContent":["declare var game: Phaser.Game;\r\n\r\nvar timeStarted =0;\r\n\r\nexport class Level {\r\n\r\n\tobjective: string;\r\n\ttimeText: Phaser.Text;\r\n\r\n\tinitialize(){\r\n\t\ttimeStarted = Date.now();\r\n\r\n\t\tconst objectiveBar = game.add.sprite(0,0, 'objective_bar');\r\n\t\tconst itemsBar = game.add.sprite(1120, 0, 'items_bar');\r\n\r\n\t\tconst playButton = game.add.sprite(1144,12, 'button_play');\r\n\t\tconst undoButton = game.add.sprite(1204,12, 'button_undo');\r\n\r\n\t\tplayButton.events.onInputDown.add(e => {\r\n\t\t\tif(game.paused){\r\n\t\t\t\tplayButton.frameName = \"stop\";\r\n\t\t\t\tgame.paused = false;\r\n\t\t\t} else {\r\n\t\t\t\tplayButton.frameName = \"play\";\r\n\t\t\t\tgame.paused = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tundoButton.events.onInputDown.add(e => {\r\n\t\t\tplayButton.frameName = \"play\";\r\n\t\t\tgame.paused = true;\r\n\t\t\tthis.initItems();\r\n\t\t})\r\n\r\n\t\tconst objectiveText = game.add.text(0, 0, this.objective, {\r\n\t\t\tfont: \"bold 16px Arial\",\r\n\t\t\tfill: \"#fff\",\r\n\t\t\tboundsAlignH: \"center\",\r\n\t\t\tboundsAlignV: \"middle\",\r\n\t\t});\r\n\t\tobjectiveText.setTextBounds(0, 0, 1120, 64);\r\n\t\tthis.timeText = game.add.text( 1158, 100, \"\", { fill : \"#000\" })\r\n\t}\r\n\r\n\tinitItems(){\r\n\r\n\t}\r\n\r\n\tupdate(){\r\n\t\tconst time = new Date(Date.now() - timeStarted);\r\n\t\tlet [m, s] = [time.getMinutes(), time.getSeconds()]\r\n\t\tthis.timeText.text = `${m<10 ? '0'+m : m} : ${s<10 ? '0'+s : s}`\r\n\t}\r\n}\r\n","declare var game: Phaser.Game;\r\n\r\nconst DEBUG_HITBOX = true;\r\n\r\nexport class Item {\r\n\tspriteMaterial: Phaser.Physics.P2.Material;\r\n\r\n\tconstructor(public tileSrc: string) {\r\n\t\tthis.spriteMaterial = game.physics.p2.createMaterial('spriteMaterial');\r\n\t}\r\n\r\n\tspawn(x: number, y: number): Phaser.Sprite {\r\n\t\tconst sprite = game.add.sprite(x, y, this.tileSrc);\r\n\t\tgame.physics.p2.enable(sprite, DEBUG_HITBOX);\r\n\t\tsprite.body.setMaterial(this.spriteMaterial);\r\n\t\treturn sprite;\r\n\t}\r\n}\r\n\r\nexport class Ball extends Item {\r\n\tconstructor(tileSrc: string, public bboxRadius: number) {\r\n\t\tsuper(tileSrc);\r\n\t}\r\n\r\n\tspawn(x: number, y: number): Phaser.Sprite {\r\n\t\tconst sprite = super.spawn(x, y);\r\n\t\tsprite.body.setCircle(this.bboxRadius);\r\n\t\treturn sprite;\r\n\t}\r\n}\r\n\r\nexport class StaticItem extends Item {\r\n\tconstructor(tileSrc: string) {\r\n\t\tsuper(tileSrc);\r\n\t}\r\n\r\n\tspawn(x: number, y: number): Phaser.Sprite {\r\n\t\tconst sprite = super.spawn(x, y);\r\n\t\tsprite.body.dynamic = false;\r\n\t\treturn sprite;\r\n\t}\r\n}\r\n","import {Ball} from \"../Item\";\r\n\r\nexport function getBalls(){\r\n\r\n\tconst Football = new Ball('ball_football', 32)\r\n\r\n\treturn {\r\n\t\tFootball\r\n\t}\r\n}","import { StaticItem } from '../Item';\r\n\r\nexport class Bouncer extends StaticItem {\r\n\tbounceFactor = 1.5;\r\n\r\n\tconstructor(tileSrc: string, public polygon: Array<Array<number>>) {\r\n\t\tsuper(tileSrc);\r\n\t}\r\n\r\n\tspawn(x: number, y: number): Phaser.Sprite {\r\n\t\tconst sprite = super.spawn(x, y);\r\n\t\tconst body: Phaser.Physics.P2.Body = sprite.body;\r\n\r\n\t\tbody.clearShapes();\r\n\t\tbody.addPolygon(null, this.polygon);\r\n\t\tbody.onBeginContact.add(onContact, this);\r\n\r\n\t\treturn sprite;\r\n\t}\r\n}\r\n\r\nfunction onContact(body, bodyB, shapeA, shapeB, equations: p2.ContactEquation[]) {\r\n\tconst contactEquation = equations[0];\r\n\tconst isTopSurface = contactEquation.contactPointA[0] === 0;\r\n\tif (isTopSurface) contactEquation.restitution = this.bounceFactor;\r\n}\r\n\r\nexport function getBouncers() {\r\n\tconst Bouncy = new Bouncer('bouncer', [[0, 0], [60, 0], [60, 20], [0, 20]]);\r\n\r\n\treturn {\r\n\t\tBouncy\r\n\t};\r\n}\r\n","import {StaticItem} from \"../Item\";\r\n\r\nexport class Pipe extends StaticItem {\r\n\tconstructor(tileSrc: string, public polygons: Array<Array<Array<number>>>){\r\n\t\tsuper(tileSrc);\r\n\t}\r\n\r\n\tspawn(x: number, y: number): Phaser.Sprite {\r\n\t\tconst sprite = super.spawn(x, y);\r\n\t\tconst body: Phaser.Physics.P2.Body = sprite.body;\r\n\r\n\t\tbody.clearShapes();\r\n\r\n\t\tthis.polygons.forEach(polygon => body.addPolygon(null, polygon))\r\n\t\t//body.data.position = [0,0];\r\n\t\tconsole.log(body);\r\n\t\treturn sprite;\r\n\t}\r\n}\r\n\r\nexport function getPipes(){\r\n\r\n\tconst MetalPipe1 = new Pipe('metal_pipe1', [\r\n\t\t[ [50,0], [50,40], [36,51], [1,50], [2,47], [36,48], [48,38], [49,2] ],\r\n\t\t[ [95,1], [95,44], [76,76], [39,95], [0,95], [0, 92], [39,92], [74,74], [92,44], [92,0] ],\r\n\t]);\r\n\r\n\treturn { MetalPipe1 }\r\n}","import {StaticItem} from \"../Item\";\r\n\r\nexport class Ramp extends StaticItem {\r\n\tconstructor(tileSrc: string, public polygon: Array<Array<number>>){\r\n\t\tsuper(tileSrc);\r\n\t}\r\n\r\n\tspawn(x: number, y: number): Phaser.Sprite {\r\n\t\tconst sprite = super.spawn(x, y);\r\n\t\tconst body: Phaser.Physics.P2.Body = sprite.body;\r\n\r\n\t\tbody.clearShapes();\r\n\t\tbody.addPolygon(null, this.polygon)\r\n\t\treturn sprite;\r\n\t}\r\n}\r\n\r\nexport function getRamps(){\r\n\r\n\tconst MetalRamp1 = new Ramp('metal_ramp1', [ [78,0], [96,18], [18,96], [0,76] ]);\r\n\tconst MetalRamp2 = new Ramp('metal_ramp2', [ [18,0], [96,77], [78, 96], [0,18] ]);\r\n\r\n\treturn { MetalRamp1, MetalRamp2 }\r\n}","declare var game: Phaser.Game;\r\n\r\nimport { Level } from '../Level';\r\n\r\nimport { getBalls } from '../items/balls';\r\nimport { getBouncers } from '../items/bouncers';\r\nimport { getPipes } from '../items/pipes';\r\nimport { getRamps } from '../items/ramps';\r\n\r\nexport class Level1 extends Level {\r\n\r\n\tobjective = \"Faire tomber les 4 tortues dans le bac radioactif\";\r\n\r\n\tinitialize() {\r\n\t\tsuper.initialize();\r\n\t}\r\n\r\n\tinitItems(){\r\n\r\n\t\tconst { Football } = getBalls();\r\n\t\tconst { MetalRamp1, MetalRamp2 } = getRamps();\r\n\t\tconst { MetalPipe1 } = getPipes();\r\n\t\tconst { Bouncy } = getBouncers();\r\n\r\n\t\tFootball.spawn(430, 100);\r\n\t\tFootball.spawn(130, 80);\r\n\t\tFootball.spawn(630, 50);\r\n\t\tFootball.spawn(810, 50);\r\n\t\tFootball.spawn(1080, 40);\r\n\r\n\t\tgame.input.onTap.add((pointer: Phaser.Pointer) => {\r\n\t\t\tFootball.spawn(pointer.x, pointer.y);\r\n\t\t}, this);\r\n\r\n\t\tMetalRamp1.spawn(400, 200);\r\n\t\tMetalRamp2.spawn(700, 200);\r\n\r\n\t\tBouncy.spawn(700, 500);\r\n\t}\r\n}\r\n","import { Level1 } from './levels/level1';\r\n\r\nvar level;\r\n\r\nconst game = new Phaser.Game(1280, 960, Phaser.AUTO, 'content', {\r\n\tpreload() {\r\n\t\tgame.load.image('logo', 'assets/phaser2.png');\r\n\t\tgame.load.image('objective_bar', 'assets/objective_bar.png');\r\n\t\tgame.load.image('items_bar', 'assets/items_bar.png');\r\n\r\n\t\tgame.load.image('button_play', 'assets/sprites/button_play.png');\r\n\t\tgame.load.image('button_restart', 'assets/sprites/button_restart.png');\r\n\t\tgame.load.image('button_undo', 'assets/sprites/button_undo.png');\r\n\r\n\t\tgame.load.image('metal_wall', 'assets/tiles/metal_wall.png');\r\n\r\n\t\tgame.load.image('ball_football', 'assets/sprites/ball_football.png');\r\n\t\tgame.load.image('metal_ramp1', 'assets/sprites/metal_ramp1.png');\r\n\t\tgame.load.image('metal_ramp2', 'assets/sprites/metal_ramp2.png');\r\n\t\tgame.load.image('metal_pipe1', 'assets/sprites/metal_pipe1.png');\r\n\r\n\t\tgame.load.tilemap('level1', 'assets/levels/level1.json', null, Phaser.Tilemap.TILED_JSON);\r\n\t},\r\n\tcreate() {\r\n\r\n\t\tgame.world.setBounds(0, 64, 32 * 35, 32 * 28);\r\n\r\n\t\tinitPhysics();\r\n\r\n\t\tconst map = game.add.tilemap('level1');\r\n\t\tmap.addTilesetImage('metal_wall');\r\n\t\tmap.setCollisionBetween(0, 7); // les tiles 0 à 7 gèrent les collisions\r\n\t\twindow.map = map;\r\n\r\n\t\t//  Creates a new blank layer and sets the map dimensions.\r\n\t\t//  In this case the map is 40x30 tiles in size and the tiles are 32x32 pixels in size.\r\n\t\t//const layer = map.create('level', 40, 30, 32, 32);\r\n\t\tconst layerWalls = map.createLayer('walls');\r\n\t\tlayerWalls.resizeWorld();\r\n\r\n\t\t//  Convert the tilemap layer into bodies. Only tiles that collide (see above) are created.\r\n\t\t//  This call returns an array of body objects which you can perform addition actions on if\r\n\t\t//  required. There is also a parameter to control optimising the map build.\r\n\t\tgame.physics.p2.convertTilemap(map, layerWalls);\r\n\r\n\t\tlevel = new Level1();\r\n\t\twindow.level = level;\r\n\t\tlevel.initialize();\r\n\t},\r\n\tupdate() {\r\n\t\tlevel.update();\r\n\t},\r\n\trender() {\r\n\r\n\t}\r\n});\r\n\r\n\r\nfunction initPhysics() {\r\n\tgame.physics.startSystem(Phaser.Physics.P2JS);\r\n\tgame.physics.p2.gravity.y = 1000;\r\n\r\n\tconst worldMaterial = game.physics.p2.createMaterial('worldMaterial');\r\n\r\n\t//  4 trues = the 4 faces of the world in left, right, top, bottom order\r\n\tgame.physics.p2.setWorldMaterial(worldMaterial, true, true, true, true);\r\n\tgame.physics.p2.world.defaultMaterial = worldMaterial;\r\n\r\n\tObject.assign(game.physics.p2.world.defaultContactMaterial, {\r\n\t\tfriction: 1.5, // Friction to use in the contact of these two materials.\r\n\t\trestitution: 0.65, // Restitution (i.e. how bouncy it is!) to use in the contact of these two materials.\r\n\t\tstiffness: 1e7, // Stiffness of the resulting ContactEquation that this ContactMaterial generate.\r\n\t\trelaxation: 3, // Relaxation of the resulting ContactEquation that this ContactMaterial generate.\r\n\t\t// frictionStiffness: 1e7; // Stiffness of the resulting FrictionEquation that this ContactMaterial generate.\r\n\t\t// frictionRelaxation: 3; // Relaxation of the resulting FrictionEquation that this ContactMaterial generate.\r\n\t\t// surfaceVelocity: 0; // Will add surface velocity to this material. If bodyA rests on top if bodyB, and the surface velocity is positive, bodyA will slide to the right.\r\n\t});\r\n}\r\n\r\nwindow.game = game;\r\n"],"names":["game"],"mappings":"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"}